/** * Created by jys on 2016/10/2. *///动画1startfunction animate1(obj, target) {    clearInterval(obj.timer);    obj.timer = setInterval(function () {        var leader = obj.offsetLeft;        var step = 10;        step = leader < target ? step : -step;        if (Math.abs(leader - target) >= Math.abs(step)) {            leader = leader + step;            obj.style.left = leader + "px";        } else {            clearInterval(obj.timer);            obj.style.left = target + "px";        }    }, 15);}//动画1 end//动画2 startfunction animate2(obj, json, fn) {    clearInterval(obj.timer);    obj.timer = setInterval(function () {        var flag = true;        for (var k in json) {            if (k === "opacity") {                var leader = getStyle(obj, k) * 100;                var target = json[k] * 100;                var step = (target - leader) / 10;                step = step > 0 ? Math.ceil(step) : Math.floor(step);                leader = leader + step;                obj.style[k] = leader / 100;            } else if (k === "zIndex") {                obj.style.zIndex = json[k];            } else {                var leader = parseInt(getStyle(obj, k)) || 0;                var target = json[k];                var step = (target - leader) / 10;                step = step > 0 ? Math.ceil(step) : Math.floor(step);                leader = leader + step;                obj.style[k] = leader + "px";            }            if (leader !== target) {                flag = false;            }        }        if (flag) {            clearInterval(obj.timer);            if (fn) {                fn();            }        }    }, 15);}function getStyle(obj, attr) {    if (window.getComputedStyle) {        return window.getComputedStyle(obj, null)[attr];    } else {        return obj.currentStyle[attr];    }}//动画2 end/*顶部搜索栏start*/$("#search-app").mouseenter(function () {    $("#search-phone").css("top", "-5px")})$("#search-app").mouseleave(function () {    $("#search-phone").css("top", "0")})/*顶部搜索栏end*//*轮播图 start*/var slider = document.getElementById("slider");var screen = slider.children[0];var sliderUl = document.getElementById("slider-ul");var ulLis = sliderUl.children;var sliderOl = document.getElementById("slider-ol");var arr = document.getElementById("arr");var left = document.getElementById("left");var right = document.getElementById("right");var imgWidth = screen.offsetWidth;var flag=true;for (var i = 0; i < ulLis.length; i++) {    var li = document.createElement("li");    sliderOl.appendChild(li);}var olLis = sliderOl.children;olLis[0].className = "active"var firstImg = ulLis[0].cloneNode(true);sliderUl.appendChild(firstImg);for (var i = 0; i < olLis.length; i++) {    olLis[i].index = i;    olLis[i].onmouseover = function () {        for (var j = 0; j < olLis.length; j++) {            olLis[j].className = "";        }        this.className = "active";        var target = -this.index * imgWidth;        animate2(sliderUl,{"left": target});        pic = square = this.index;    }}slider.onmouseover = function () {    arr.style.display = "block";    clearInterval(timer);};slider.onmouseout = function () {    arr.style.display = "none";    timer = setInterval(playNext, 3000);};var pic = 0;var square = 0;right.onclick = function () {    if(flag==false){        return;    }    flag=false;    if (pic === ulLis.length - 1) {    	pic=0;        sliderUl.style.left = 0 + "px";    }    pic++;    var target = -pic * imgWidth;    animate2(sliderUl,{"left": target},function(){        flag=true;    });    if (square < olLis.length - 1) {        square++;    } else {        square = 0;    }    for (var i = 0; i < olLis.length; i++) {        olLis[i].className = "";    }    olLis[square].className = "active";};left.onclick = function () {    if(flag==false){        return;    }    flag=false;    if (pic === 0) {        sliderUl.style.left = -(ulLis.length - 1) * imgWidth + "px";        pic = ulLis.length - 1;    }    pic--;    var target = -pic * imgWidth;    animate2(sliderUl,{"left": target},function(){        flag=true;    });    if (square > 0) {        square--;    } else {        square = olLis.length - 1;    }    for (var i = 0; i < olLis.length; i++) {        olLis[i].className = "";    }    olLis[square].className = "active";};timer = setInterval(playNext,3000);function playNext() {    right.onclick();}/*轮播图 end*//*热门分类start*/var categoryUl = document.getElementById("category-ul");var cUlLis = categoryUl.children;var categoryDiv = document.getElementById("category-div");var cDivLis = categoryDiv.children;for (var i = 0; i < cUlLis.length; i++) {    var cuLi = cUlLis[i];    cuLi.index = i;    cuLi.onmouseover = function () {        for (var j = 0; j < cUlLis.length; j++) {            cUlLis[j].className = "";        }        this.className = "active";        for (var k = 0; k < cDivLis.length; k++) {            cDivLis[k].className = "";            cDivLis[this.index].className = "show";        }    }    cuLi.onmouseout = function () {        this.className = "";        for (var k = 0; k < cDivLis.length; k++) {            cDivLis[k].className = "";        }    }}/*热门分类end*//*限时热卖start*/$("#hotUl").on("mouseenter", ".hot-mask", function () {    $(this).fadeTo(500, 0.3);})$("#hotUl").on("mouseleave", ".hot-mask", function () {    $(this).fadeTo(500, 0);})/*限时热卖end*/$("#changeUl").click(function () {    $("#firstUl").siblings().hide();    $("#firstUl").nextElementSibling().show();})/*推荐start*/$("#hotlistUl").on("mouseenter", "li", function () {    $(this).css("box-shadow", "10px 10px 10px rgba(0, 0, 0, .3)");})$("#hotlistUl").on("mouseleave", "li", function () {    $(this).css("box-shadow", "none");})/*推荐end*//*自由行start*///$("#ziyouxing").on("mouseenter", "li", function () {    $(this).stop(true, false);    $(this).slideDown(100);    $(this).slideUp(100);})$("#ziyouxing").on("mouseleave", "li", function () {    $(this).slideDown(1000);})/*自由行end*//*城市玩乐start*/$("#wondercontent").on("mouseenter", "li", function () {    $(this).css({        "transform": "scale(1.05)",        "transition": "all 2s ease"    });})$("#wondercontent").on("mouseleave", "li", function () {    $(this).css("transform", "scale(1)");})/*城市玩乐end*//*主题推荐start*/$("#themecontent").on("mouseenter", "li", function () {    $(this).css("boxShadow", "2px 2px 7px 3px gray");})$("#themecontent").on("mouseleave", "li", function () {    $(this).css("boxShadow", "none");})/*主题推荐end*/