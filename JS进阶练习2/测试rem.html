<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试rem适配</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <style type="text/css">
        /*默认情况下html的font-size值是16px*/
        * {
            margin: 0;
            padding: 0;
        }

        body {
            height: 100%;
            width: 100%;
            position: relative;
        }

        .layout {
            width: 100%;
            height: 10rem;
            background-color: orange;
            position: absolute;
            top: 0;
            left: 0;
        }

        .p1 {
            font-size: 2rem;
        }

        .p2 {
            font-size: 1rem;
        }
/*
        @media screen and (min-width: 993px) {
            html {
                font-size: 16px;
            }
        }

        @media screen and (min-width: 769px) and (max-width: 992px) {
            html {
                font-size: 85%;
            }
        }

        @media screen and (min-width: 321px) and (max-width: 768px) {
            html {
                font-size: 75%;
            }
        }

        @media screen and (max-width: 320px) {
            html {
                font-size: 60%;
            }
        }*/
    </style>
</head>
<body>
<div class="layout">
    <p class="p1">
        我在测试rem
    </p>
    <p class="p2">
        移动端适配
    </p>
</div>
<script src="./node_modules/jquery/dist/jquery.min.js"></script>
<script>
    /*var dpr, rem, scale;
     var docEl = document.documentElement;
     var fontEl = document.createElement('style');
     var metaEl = document.querySelector('meta[name="viewport"]');
     scale = 1 / dpr;
     dpr = win.devicePixelRatio || 1;
     rem = docEl.clientWidth * dpr / 10;
     // 设置viewport，进行缩放，达到高清效果
     metaEl.setAttribute('content', 'width=' + dpr * docEl.clientWidth + ',
     initial-scale=' + scale + ',maximum-scale=' + scale + ',
     minimum-scale=' + scale + ',user-scalable=no');
     // 设置data-dpr属性，留作的css hack之用
     docEl.setAttribute('data-dpr', dpr);
     // 动态写入样式
     docEl.firstElementChild.appendChild(fontEl);
     fontEl.innerHTML = 'html{font-size:' + rem + 'px!important;}';
     // 给js调用的，某一dpr下rem和px之间的转换函数
     window.rem2px = function(v) {
     v = parseFloat(v);
     return v * rem;
     };
     window.px2rem: function(v) {
     v = parseFloat(v);
     return v / rem;
     };
     window.dpr = dpr;
     window.rem = rem;*/

    (function (doc, win) {
        var docEl = doc.documentElement, resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize', recalc = function () {
            var clientWidth = docEl.clientWidth;
            if (!clientWidth) return;
            docEl.style.fontSize = 20 * (clientWidth / 320) + 'px';
        };
        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
</script>
</body>
</html>